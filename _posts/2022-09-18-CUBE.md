---
layout: post
title: CUBE
date: 2022-09-18 17:33:18 +0200
image: cube.webp
description: My first major project I have worked on, helping me understand KiCAD, 3D Modelling and product design in general.  # Add post description (optional)
tags: [kicad, pcb, blender, freecad, ESP32, SSD1351, cube] 
categories: kicad blender freecad  
---

During my year in industry at Huawei, it dawned on me how little practical experience I had on engineering projects. I've always been into tech and being creative, yet I hadn't ever taken the dive into trying to build something from scratch. I started by surrounding everything I saw online with other engineers and creators to help inspire ideas. Months went past with me silently browsing and finding new creators, when I found a post by [Greg Davill](https://gregdavill.com/blog/2020/6/13/miniature-3456x-led-cube). This colourful cube was exactly the sort of thing I was looking for. It was flashy and “simple enough” to get started. I realized early on that FPGAs were a bit too much for a first time project, so I looked into ways of working with microcontrollers. I also wanted to miniaturize what he had done, so I looked around and found other projects of a similar theme. More reading led me to find Pol Pla's paper on [Display Blocks](https://dam-prod.media.mit.edu/x/files/sites/default/files/TEI_DisplayBlocks_CameraReady_lite.pdf). 

>Display Blocks are designed to be a series of handheld
devices, enabling easy manipulation. Holding a device in
their hands, users are able to easily rotate it and reveal its
different sides. Thus, creating a self-enclosed, autonomous
device was crucial to offering unencumbered exploration of
content. The final design supports not only single device
manipulation but also holding multiple devices at once. For
this purpose, the devices must be easy to manipulate using
only one hand; this way, users can compare cubes side by side, adding even more richness to the navigation of data.

After reading this, I knew this was the project I had to work on, no matter how difficult it might be. Not only would it be a great engineering challenge, but it provided a tangible and satisfying object at the end of it.

&nbsp;

## **Circuit Design**
I decided the easiest way to house the electronics for this project was to build 6 PCBs. PCB 1 acts as the motherboard -- holding the main circuitry, with PCBs 2-6 acting as daughter boards simply containing the basic passive components and connectors to attach to displays. All of these boards are daisy chained together using **F**lat **F**lex **C**ables **(FFC)**. These cables act as the bus providing the necessary power and SPI signals to the boards.

#### **Motherboard (PCB 1)**
There are 3 main ICs present on the motherboard.
&nbsp;

**SSD1351**\
This is the IC used by every display in this design, it allows for SPI control of a 128×128 RGB OLED display. Unfortunately there isn't a massive market for square OLED displays, so it's hard to find ones that are small and high resolution. As a result the best display I could find has rather large bezels, hopefully with the growth of the VR market, small OLED screens might become a cheap as phone screens are today. 
![Display]({{site.baseurl}}/images/display.webp)

**ICM20602**\
The ICM20602 is an **I**nertial **M**easurement **U**nit **(IMU)**, housing an accelerometer and gyroscope. IMUs open up the possibility of using simple gestures to control the device, for example shaking the device can be used to wake the device from sleep or tilting the device to control the movement of a cursor. I chose this chip for its small size and SPI port, meaning only one more chip select line needs to be added to the SPI bus used by the displays. 

**ESP32-S2-Mini-1U**\
Finally, the star of the show. The ESP32 is an amazing chip for its size, the benefit of using the newer/slightly slower chip is its simplicity. The ESP32-S2 has its own native USB interface, this means I don't have to add a CP2102 and a bunch of other circuity to my design. Fewer parts, fewer problems.

![Motherboard]({{site.baseurl}}/images/motherboard.webp)
![PCB]({{site.baseurl}}/images/pcb.webp)
&nbsp;
#### **Daughterboards (PCB 2-6)**
The other 5 PCBs have almost identical schematics, providing the passive components and connectors for the displays. These displays will all be daisy-chained together with the motherboard to provide a 6 display device.



## Frame Design
I initially designed the frame in unison with the 

<!-- ![Inside]({{site.baseurl}}/images/inside_cube.webp) -->
![MousePCB]({{site.baseurl}}/images/pcb_mouse.webp)

## Software Design

## Final Notes
[Cube Repository](https://github.com/BenjaminJAnderson/CUBE)

Details were sparse as to the actual circuitry and design of the 3D printed enclosure, so I assembled a rough BOM for the project using readily available hardware.

1. 4DOLED-282815 (128x128 RGB OLED Display)
2. ICM20602 (Inertial Measurement Unit)
3. ESP32-S2-Mini-1U (Microcontroller)
4. Battery

The hardest part about the project was using Fusion360 and KiCAD in tandem with eachother. As the component placement, PCB and 3D Printed housing were all linked together
![First Design]({{site.baseurl}}/images/about.webp)
